; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:attiny85]
platform = atmelavr
board = attiny85
framework = arduino
board_build.f_cpu = 16000000L
build_flags = 
	-DF_CPU=16000000L
	-DARDUINO_AVR_ATTINYX5
	-DCLOCK_SOURCE=8
lib_deps = 
    adafruit/Adafruit NeoPixel

; Prefer vendored libraries under lib/ over remote Git deps
lib_ldf_mode = chain+
extra_scripts = 
	scripts/hex2wav_post.py
; hex2wav_cmd selects the hex->wav converter:
;   - auto (default): auto-detect OS and use bundled hex2wav binary
;   - Linux 64-bit:   tools/hex2wav/linux/hex2wav64_bin {hex} {wav}
;   - Linux 32-bit:   tools/hex2wav/linux/hex2wav32_bin {hex} {wav}
;   - macOS:          tools/hex2wav/macosx/hex2wav {hex} {wav}
;   - Windows:        tools/hex2wav/windows/hex2wav.exe {hex} {wav}
;   - Java (any OS):  java -jar tools/hex2wav/hex2wav.jar -i {hex} -o {wav}
; The placeholders {hex} and {wav} are filled by scripts/hex2wav_post.py.
; Use custom_ keys to avoid PlatformIO warnings.
custom_hex2wav_cmd = auto
custom_hex2wav_auto_play = no
; custom_hex2wav_player_cmd is auto-detected when using "auto" mode
upload_protocol = custom
; Note: upload_command requires OS-specific paths (auto-detection not available here)
; Linux:   tools/hex2wav/linux/hex2wav64_bin $SOURCE .pio/build/${PIOENV}/${PROGNAME}.wav && aplay -q .pio/build/${PIOENV}/${PROGNAME}.wav
; Windows: tools/hex2wav/windows/hex2wav.exe $SOURCE .pio/build/${PIOENV}/${PROGNAME}.wav
; macOS:   tools/hex2wav/macosx/hex2wav $SOURCE .pio/build/${PIOENV}/${PROGNAME}.wav && afplay .pio/build/${PIOENV}/${PROGNAME}.wav
upload_command = tools/hex2wav/linux/hex2wav64_bin $SOURCE .pio/build/${PIOENV}/${PROGNAME}.wav && aplay -q .pio/build/${PIOENV}/${PROGNAME}.wav
; Exclude emulator entry from MCU build
build_src_filter = 
    -<*> ; Exclude all files by default
    ; Select ONE of the following main files:
    ; +<yourfile.cpp>
     +<vco_1voct.cpp>


[platformio]
description = Attiny85 project including functional audio upload like the 8Bit Mixtape
